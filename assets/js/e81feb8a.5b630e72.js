"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[395],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,g=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return n?r.createElement(g,l(l({ref:t},u),{},{components:n})):r.createElement(g,l({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2994:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return p}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),l=["components"],o={title:"Container \ud658\uacbd\uc5d0\uc11c\uc758 JVM GC",description:"\ucee8\ud14c\uc774\ub108 \ud658\uacbd\uc5d0\uc11c\uc758 JVM GC\ub294 \uc5b4\ub5bb\uac8c \ub418\ub294\uc9c0 \uc54c\uc544\ubcf4\uc790.",slug:"container-gc",authors:"dongle",tags:["Kubernate","Container","JVM","Java"],image:"https://i.imgur.com/mErPwqL.png",hide_table_of_contents:!1},s=void 0,c={permalink:"/container-gc",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2022-05-02-JVM-GC-IN-KUBERNATE.md",source:"@site/blog/2022-05-02-JVM-GC-IN-KUBERNATE.md",title:"Container \ud658\uacbd\uc5d0\uc11c\uc758 JVM GC",description:"\ucee8\ud14c\uc774\ub108 \ud658\uacbd\uc5d0\uc11c\uc758 JVM GC\ub294 \uc5b4\ub5bb\uac8c \ub418\ub294\uc9c0 \uc54c\uc544\ubcf4\uc790.",date:"2022-05-02T00:00:00.000Z",formattedDate:"May 2, 2022",tags:[{label:"Kubernate",permalink:"/tags/kubernate"},{label:"Container",permalink:"/tags/container"},{label:"JVM",permalink:"/tags/jvm"},{label:"Java",permalink:"/tags/java"}],readingTime:4.565,truncated:!0,authors:[{name:"Dongle",title:"Junior Backend Developer",url:"https://github.com/sk1737030",imageURL:"https://github.com/sk1737030.png",key:"dongle"}],frontMatter:{title:"Container \ud658\uacbd\uc5d0\uc11c\uc758 JVM GC",description:"\ucee8\ud14c\uc774\ub108 \ud658\uacbd\uc5d0\uc11c\uc758 JVM GC\ub294 \uc5b4\ub5bb\uac8c \ub418\ub294\uc9c0 \uc54c\uc544\ubcf4\uc790.",slug:"container-gc",authors:"dongle",tags:["Kubernate","Container","JVM","Java"],image:"https://i.imgur.com/mErPwqL.png",hide_table_of_contents:!1},nextItem:{title:"Request Rate Limiter\ub97c \ub9cc\ub4e4\uc5b4\ubcf4\uc790!",permalink:"/RateLimiter"}},u={authorsImageUrls:[void 0]},p=[{value:"Jdk 11\uc5d0\uc11c\uc758 GC\ub294 \ubb34\uc870\uac74 G1GC\uc8e0!",id:"jdk-11\uc5d0\uc11c\uc758-gc\ub294-\ubb34\uc870\uac74-g1gc\uc8e0",level:2},{value:"\ubc1c\ub2e8",id:"\ubc1c\ub2e8",level:3},{value:"\uc815\ub9d0\uc77c\uae4c?",id:"\uc815\ub9d0\uc77c\uae4c",level:3},{value:"\uc758\uc2ec",id:"\uc758\uc2ec",level:3},{value:"\uce68\ucc29",id:"\uce68\ucc29",level:3},{value:"SerailGC",id:"serailgc",level:3},{value:"G1GC",id:"g1gc",level:3},{value:"\uc6d0\uc778",id:"\uc6d0\uc778",level:3}],d={toc:p};function m(e){var t=e.components,o=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"\uc791\uc131\uc911\uc5d0 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("h2",{id:"jdk-11\uc5d0\uc11c\uc758-gc\ub294-\ubb34\uc870\uac74-g1gc\uc8e0"},"Jdk 11\uc5d0\uc11c\uc758 GC\ub294 \ubb34\uc870\uac74 G1GC\uc8e0!"),(0,i.kt)("p",null,"\ub2f9\uc5f0\ud788 GC\ub97c G1GC\ub97c \uc4f0\uace0 \uc788\uaca0\uc9c0\ub77c\uace0 \ud55c\uce58\uc758 \uc758\uc2ec\uc5c6\uc774 \uc0dd\uac01\uc744 \ud588\uc5c8\ub2e4. \uc544\ub2c8 \uc801\uc5b4\ub3c4 Jdk 11\uc744 \uc0ac\uc6a9\ud558\uba74\uc11c GC\ub97c zgc vs g1gc\ub97c \ubb58 \uc368\uc57c \ub354 \uc88b\uc744\uae4c \uc774\ub7f0 \ud589\ubcf5\ud68c\ub85c\ub9cc \ud588\uc5c8\uc9c0 \uc124\ub9c8 ",(0,i.kt)("strong",{parentName:"p"},"Serial\xa0Collector"),"\ub97c \uace0\ubbfc\uc744 \ud558\uace0 \uc788\uc744 \uc904\uc774\uc57c \uafc8\uc5d0\uc11c\ub3c4 \uc0dd\uac01\uc744 \ubabb\ud588\ub2e4. ****\uacb0\ub860\ubd80\ud130 \ub9d0\ud558\uc790\uba74 Container \ud658\uacbd\uc5d0\uc11c \uba54\ubaa8\ub9ac\uc640 Cpu\uc5d0 \ub530\ub77c\uc11c  g1gc\ub97c \uc4f8 \uc218\ub3c4 \uc544\ub2d0 \uc218\ub3c4 \uc788\ub2e4."),(0,i.kt)("h3",{id:"\ubc1c\ub2e8"},"\ubc1c\ub2e8"),(0,i.kt)("p",null,"\uc77c\ub2e8 \uc6b0\ub9ac\ub294 \ud754\ud558\ub514 \ud754\ud55c ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernate"),"\uc758 \uba4b\uc788\ub294 \uc624\ucf00\uc2a4\ud2b8\ub77c\ub97c \uc5f0\uc8fc\ub97c \ud558\uba70 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"\ud658\uacbd\uc5d0\uc11c app\uc744 \ubc30\ud3ec\ud558\uace0 \uad00\ub9ac\ud558\uace0\uc788\ub2e4. \uc5b4\ub290\ub0a0 Slack\uc5d0 \ud06c\ub8e8 \uc911 \ub204\uad70\uac00\uac00 \uc6b0\ub9ac \ub2f9\uc5f0\ud788 g1gc\uc4f0\uace0 \uc788\uc8e0? \ub77c\uace0 \uc62c\ub77c\uc640\uc11c \ub098\ub294 \uc5e5? \ub2f9\uc5f0\ud55c\uac70 \uc544\ub2cc\uac00\ub77c\uace0 \uc0dd\uac01\uc744 \ud558\uace0 \ub2e4\ub978 \uc77c\uc744 \ud588\ub294\ub370 \ub2e4\ub978 \ud06c\ub8e8\uac00 \uc6b0\ub9ac ",(0,i.kt)("strong",{parentName:"p"},"Serial\xa0Collector")," \uc778\uac70 \uac19\uc740\ub370\uc694??? \ub77c\uace0 \ub2f5\uc7a5\uc744 \ub2ec\uc558\ub2e4.  "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"\uc544\ub2c8 \uc774\uac8c \ubb54 \uac1c \uc18c\ub9ac\uc57c!",src:n(971).Z,width:"236",height:"213"})),(0,i.kt)("p",null,"\uc544\ub2c8 \uc774\uac8c \ubb54 X \uc18c\ub9ac\uc57c!"),(0,i.kt)("h3",{id:"\uc815\ub9d0\uc77c\uae4c"},"\uc815\ub9d0\uc77c\uae4c?"),(0,i.kt)("p",null,"\ub098\ub294 \uc6b0\ub9ac jdk11\ubc84\uc804 \uc4f0\ub294\ub370? \uadf8\ub7f4\ub9ac\uac00 \uc788\uc5b4? \uc5d0\uc774 \uc798\ubabb \ubd24\uaca0\uc9c0\ub77c\uace0 \uc0dd\uac01\uc744 \ud558\uace0 \uc88b\uc544 \ub0b4 \ub208\uc73c\ub85c \ud655\uc778\uc744 \ud574\ubd10\uc57c\uc9c0\ub77c\uba70 container\uc5d0  \ub4e4\uc5b4\uac00\uc11c \ud655\uc778\uc744 \ud574 \ubd24\ub294\ub370"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'> java -XX:+PrintCommandLineFlags -version\n\nPicked up JAVA_TOOL_OPTIONS:\n...\n-XX:+SegmentedCodeCache \n-XX:+UseCompressedClassPointers \n-XX:+UseCompressedOops \n**-XX:+UseSerialGC** \n\nopenjdk version "11.0.13" 2021-10-19\nOpenJDK Runtime Environment (build 11.0.13+8-post-Debian-1deb11u1)\nOpenJDK 64-Bit Server VM (build 11.0.13+8-post-Debian-1deb11u1, mixed mode)\n')),(0,i.kt)("p",null,"\uc77c\ub2e8 \ub2e4\ub978 Java_Tool Option\uc774 \uc788\uc5c8\uc9c0\ub9cc \ub2e4 \uc0dd\ub7b5\ud558\uace0 \uba3c\uc800 OpenJdk \uc0ac\uc6a9 \uc911\uc774\uace0 Version\uc740 11.0.13\uc744 \uc0ac\uc6a9\ud558\ub294 \uac78 \ud655\uc778 \ud558\uace0, \uc635\uc158\uc744 \ubd24\ub294\ub370 ",(0,i.kt)("inlineCode",{parentName:"p"},"-XX:+UseSerialGC"),"  (",(0,i.kt)("del",{parentName:"p"},"\uc544\ub2c8 \ud615\uc774 \uc65c \uc694\uae30\uc11c \ub098\uc640"),")  "),(0,i.kt)("h3",{id:"\uc758\uc2ec"},"\uc758\uc2ec"),(0,i.kt)("p",null,"\ub108\ubb34 \ub180\ub77c\uc11c, \uc9c0\uae08 \uc0dd\uac01\ud574\ubcf4\uba74 \ub9d0\ub3c4\uc548\ub418\ub294 \uc5ec\ub7ec \uc758\uc2ec\ub4e4\uc744 \ud588\ub294\ub370 "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\uc800 JDK \ubc84\uc804\uc774 \ubb38\uc81c\uac00 \uc788\uc5b4\uc11c \ubb34\uc870\uac74 SerialGC\ub97c \uc8fc\uc785 \ud560 \uac83\uc774\ub2e4.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\ub77c\uace0 \uc0dd\uac01\uc744 \ud588\uc9c0\ub9cc, \uc0ac\uc2e4 \ub9d0\ub3c4 \uc548\ub41c\ub2e4 \ubb34\uc2a8 \ub3d9\ub124 OpenJdk\ub3c4 \uc544\ub2c8\uace0 \uc774 \uc0dd\uac01\uc740 \uae08\ubc29 \ub118\uc5b4\uac14\ub2e4"))),(0,i.kt)("li",{parentName:"ol"},"\ub204\uad70\uac00\uac00 \uc8fc\uc785\uc744 \ud588\uc744 \uac83\uc774\ub2e4.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\ub204\uad70\uac00\uac00 build\ub97c \ud560 \ub54c \uc8fc\uc785\uc744 \ud574\ub1a8\uc744 \uac70\ub77c\uace0 \uc0dd\uac01\uc744 \ud558\uace0 build\ubd80\ubd84\uc744 \uc720\uc2ec\ud788 \ubd24\uc9c0\ub9cc SerialGC\uc758 S\ub3c4 \ucc3e\uc544 \ubcfc \uc218 \uc5c6\uc5c8\ub2e4."))),(0,i.kt)("li",{parentName:"ol"},"\uc800 \uc635\uc158\uc774 \ubcf4\uc5ec\uc8fc\ub294\uac74 \uac00\uc9dc\uc57c!")),(0,i.kt)("p",null,"\ub4f1\ub4f1 \uc9c4\uc9dc \ub9d0\ub3c4\uc548\ub418\ub294 \uc758\uc2ec\ub4e4\uc744 \ud558\uae30 \uc2dc\uc791\ud588\ub2e4."),(0,i.kt)("h3",{id:"\uce68\ucc29"},"\uce68\ucc29"),(0,i.kt)("p",null,"\uc0ac\uc2e4 \uc704\uc5d0 \uc800\ub7f0 \uc758\uc2ec\ub9d0\uace0\ub3c4 \uc5ec\ub7ec \uac00\uc815\uacfc \uc218 \ub9ce\uc740 \uc758\uc2ec\ub4e4\uc744 \ud588\uc5c8\ub2e4. \uadf8\ub7ec\ub2e4\uac00 \ud604\uc2e4\uc744 \ubc1b\uc544\ub4e4\uc774\uace0 \uc65c SerialGC\ub97c \uc0ac\uc6a9 \ud558\uac8c \ub418\uc5c8\uc744\uae4c\ub77c\uace0 \uc0dd\uac01\uc744 \ud588\ub2e4. \uc0ac\uc2e4 \ub09c \ub098\ubcf4\ub2e4 Kube\ud658\uacbd\uc5d0\uc11c\uc758 Container\uac00 \uc790\ub3d9\uc73c\ub85c ",(0,i.kt)("strong",{parentName:"p"},"\uc800\ub807\uac8c \uc124\uc815\ud55c \uc774\uc720\uac00 \uc788\uaca0\uc9c0\ub77c\uace0")," \ub354 \ubbff\uae30 \ub54c\ubb38\uc5d0 \uc624\ub79c\ub9cc\uc5d0 SeraliGC\uc640 G1GC\ub97c \ub2e4\uc2dc \ud655\uc778 \ud574 \ubcf4\uae30\ub85c \ud588\ub2e4."),(0,i.kt)("h3",{id:"serailgc"},"SerailGC"),(0,i.kt)("h3",{id:"g1gc"},"G1GC"),(0,i.kt)("h3",{id:"\uc6d0\uc778"},"\uc6d0\uc778"),(0,i.kt)("p",null,"\uc6d0\uc778\uc740 ",(0,i.kt)("a",{parentName:"p",href:"https://developers.redhat.com/articles/2022/04/19/java-17-whats-new-openjdks-container-awareness#tuning_defaults_for_containers"},"RedHat\ubb38\uc11c"),"\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc788\uc5c8\ub294\ub370"),(0,i.kt)("aside",null,"\ud83d\udca1 For Java 11+ it's also useful to know which GC is being used, and you can display this information via\xa0-Xlog:gc=info. For example, when container limits allow only a single CPU to be active, the Serial GC will be selected. `If more than one CPU is active and sufficient memory (at least 2GB) is allocated to the container, the G1 GC will be selected in Java 11 and later versions:`"),(0,i.kt)("p",null,"CPU Core\ub97c 2\uac1c\uc774\uc0c1\uc774\uba74\uc11c Memory\uac00 2G\uc774\uc0c1\uc774\uc5ec\uc57c G1GC\uac00 \ucc44\ud0dd\ub41c\ub2e4\ub294 \uac83\uc774\ub2e4."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://developers.redhat.com/articles/2022/04/19/best-practices-java-single-core-containers#the_jvm_as_a_dynamic_execution_platform"},"\uc544\ub9c8\ub3c4  \ucf54\ub4dc\uc5d0\uc11c\ub294 \uc774\ub7f0 \ub290\ub08c\uc774\uc9c0 \uc54a\uc744\uae4c")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"void GCConfig::select_gc_ergonomically() {\n  if (os::is_server_class_machine()) {\n#if INCLUDE_G1GC\n    FLAG_SET_ERGO_IF_DEFAULT(UseG1GC, true);\n#elif INCLUDE_PARALLELGC\n    FLAG_SET_ERGO_IF_DEFAULT(UseParallelGC, true);\n#elif INCLUDE_SERIALGC\n    FLAG_SET_ERGO_IF_DEFAULT(UseSerialGC, true);\n#endif\n  } else {\n#if INCLUDE_SERIALGC\n    FLAG_SET_ERGO_IF_DEFAULT(UseSerialGC, true);\n#endif\n  }\n}\n\n// This is the working definition of a server class machine:\n// >= 2 physical CPU's and >=2GB of memory\n")))}m.isMDXComponent=!0},971:function(e,t,n){t.Z=n.p+"assets/images/Untitled-1da7573e785643ce48b7c5d578a645bc.png"}}]);